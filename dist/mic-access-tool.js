!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MicAccessTool=t():e.MicAccessTool=t()}(self,(()=>(()=>{"use strict";function e(e){this.init=e||{},this.removedImages=[],this.imagesHidden=!1,this.isMuted=!1,this.initializeAccessibilityToolbox(),this.initBlueFilter(),this.initRemoveImages(),this.initAudioRemoval(),this.initReadAloud(),this.initFontSizeAdjustment(),this.initHighlightButtons(),this.initStopAnimationsButton(),this.initZoomToggleFeature(),this.initNightModeFeature(),this.initTextSpacingFeature(),this.initLineHeightFeature(),this.initCursorSizeAdjustment(),this.initKeyboardNavigation(),this.initAccessibleFontToggle(),this.initResetFeature()}function t(e,t={},o=""){const n=document.createElement(e);for(const[e,o]of Object.entries(t))n.setAttribute(e,o);return o&&(n.innerText=o),n}function o(e,o,n=""){const i=t("button",{class:"toolbox-button",id:e});if(n){const e=document.createElement("span");e.innerHTML=n,i.appendChild(e)}const s=document.createTextNode(o);return i.appendChild(s),i}function n(e,o=""){const n={class:e};return o&&(n.id=o),t("div",n)}function i(e,o,n){return t("img",{src:e,alt:o,class:n})}function s(e,o,n=""){return t(`h${e}`,{class:n},o)}return e.prototype.createToolbox=function(){const e=n("toolbox hidden","toolbox"),t=n("toolbox-image-container"),a=i("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRmaznO2w-h9n4bz-pEGtsiqy0J1JGh-wlMCw&s","Accessibility Logo","toolbox-image");t.appendChild(a),e.appendChild(t);const l=n("toolbox-header"),c=s(2,"Accessibility Toolbox","toolbox-title");l.appendChild(c);const d=n("toolbox-body");[{id:"blue-filter-btn",text:"Blue Filter",iconClass:'<i class="fas fa-adjust"></i>'},{id:"read-aloud-btn",text:"Read Aloud",iconClass:'<i class="fas fa-volume-up"></i>'},{id:"remove-images-btn",text:"Remove Images",iconClass:'<i class="fa-regular fa-image"></i>'},{id:"remove-audio-btn",text:"Remove Audio",iconClass:'<i class="fas fa-microphone-slash"></i>'},{id:"increase-text-btn",text:"Increase Text",iconClass:'<i class="fas fa-text-height"></i>'},{id:"decrease-text-btn",text:"Decrease Text",iconClass:'<i class="fas fa-text-width"></i>'},{id:"highlight-links-btn",text:"Highlight Links",iconClass:'<i class="fas fa-link"></i>'},{id:"highlight-headers-btn",text:"Highlight Headers",iconClass:'<i class="fas fa-heading"></i>'},{id:"stop-animations-btn",text:"Stop Animations",iconClass:'<i class="fas fa-ban"></i>'},{id:"zoom-toggle-btn",text:"Zoom",iconClass:'<i class="fas fa-search"></i>'},{id:"night-mode-btn",text:"Night Mode",iconClass:'<i class="fas fa-moon"></i>'},{id:"cursor-size-btn",text:"Change Cursor Size",iconClass:'<i class="fas fa-mouse-pointer"></i>'},{id:"accessible-font-btn",text:"Accessible Font",iconClass:'<i class="fas fa-font"></i>'}].forEach((({id:e,text:t,iconClass:n})=>{const i=o(e,t,n);d.appendChild(i)})),e.appendChild(l),e.appendChild(d),document.body.appendChild(e),this.resetButtonStates()},e.prototype.createSideButton=function(){const e=n("side-button","openToolboxButton"),t=i("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRmaznO2w-h9n4bz-pEGtsiqy0J1JGh-wlMCw&s","Open Toolbox","side-button-image");e.appendChild(t),document.body.appendChild(e)},e.prototype.initializeAccessibilityToolbox=function(){this.createToolbox(),this.createSideButton();const e=document.getElementById("toolbox"),t=document.getElementById("openToolboxButton");t.addEventListener("click",(t=>{t.stopPropagation(),e.classList.toggle("visible")})),document.addEventListener("click",(o=>{e.contains(o.target)||t.contains(o.target)||e.classList.remove("visible")}))},e.prototype.initBlueFilter=function(){const e=n("blue-overlay");document.body.appendChild(e);const t=document.getElementById("blue-filter-btn");t&&t.addEventListener("click",(()=>{e.classList.toggle("active"),this.setActiveButton("blue-filter-btn")}))},e.prototype.initRemoveImages=function(){const e=document.getElementById("remove-images-btn");e&&e.addEventListener("click",(()=>{this.toggleImages(),this.setActiveButton("remove-images-btn")}))},e.prototype.toggleImages=function(){this.imagesHidden?(this.removedImages.forEach((({img:e,parent:t,nextSibling:o})=>{o?t.insertBefore(e,o):t.appendChild(e)})),this.removedImages=[]):document.querySelectorAll("img:not(.toolbox-image):not(.side-button-image)").forEach((e=>{this.removedImages.push({img:e,parent:e.parentNode,nextSibling:e.nextSibling}),e.parentNode.removeChild(e)})),this.imagesHidden=!this.imagesHidden},e.prototype.initAudioRemoval=function(){const e=document.getElementById("remove-audio-btn");e&&e.addEventListener("click",(()=>{this.audioRemoval(),this.setActiveButton("remove-audio-btn")}))},e.prototype.audioRemoval=function(){const e=document.querySelectorAll("audio, video");this.isMuted=!this.isMuted,e.forEach((e=>{e.muted=this.isMuted}))},e.prototype.initReadAloud=function(){const e=document.getElementById("read-aloud-btn");e&&e.addEventListener("click",(()=>{this.toggleReadAloud("read-aloud-btn")})),"true"===localStorage.getItem("readAloudActive")&&(this.enableDefaultClickToRead(),this.createReadAloudToolbar(),this.setActiveButton("read-aloud-btn",!0))},e.prototype.toggleReadAloud=function(e){const t=document.getElementById("read-aloud-toolbar"),o=t&&!t.classList.contains("hidden");o?(this.disableDefaultClickToRead(),this.stopReadAloud(),t.classList.add("hidden"),this.setActiveButton(e,!1),localStorage.setItem("readAloudActive",!1)):(t?t.classList.remove("hidden"):this.createReadAloudToolbar(),this.enableDefaultClickToRead(),this.setActiveButton(e,!0),localStorage.setItem("readAloudActive",!0)),console.log(`Read Aloud ${o?"disabled":"enabled"}.`)},e.prototype.createReadAloudToolbar=function(){const e=n("read-aloud-toolbar","read-aloud-toolbar"),t=n("toolbar-header"),i=s(2,"Read Aloud Settings","toolbar-title"),a=o("close-toolbar","✖");a.addEventListener("click",(()=>{e.remove(),this.disableDefaultClickToRead()})),t.appendChild(i),t.appendChild(a),e.appendChild(t);const l=n("toolbar-controls"),c=o("cursor-read-btn","Cursor Read Aloud");c.innerHTML='<i class="fas fa-mouse-pointer"></i> Cursor Read Aloud',c.addEventListener("click",this.enableCursorReadAloud.bind(this));const d=o("previous-line-btn","Previous Line");d.innerHTML='<i class="fas fa-arrow-left"></i> ',d.addEventListener("click",this.readPreviousLine.bind(this));const r=o("play-read-btn","▶");r.innerHTML='<i class="fas fa-play"></i>',r.addEventListener("click",this.playReadAloud.bind(this));const h=o("stop-read-btn","⏹");h.innerHTML='<i class="fas fa-stop"></i>',h.addEventListener("click",this.stopReadAloud.bind(this));const u=o("next-line-btn","Next Line");u.innerHTML='<i class="fas fa-arrow-right"></i> ',u.addEventListener("click",this.readNextLine.bind(this));const g=document.createElement("div");g.className="sliders-container";const m=document.createElement("div");m.className="slider-wrapper";const p=document.createElement("label");p.setAttribute("for","volume-slider"),p.textContent="Volume:",m.appendChild(p);const b=document.createElement("input");b.type="range",b.id="volume-slider",b.min="0",b.max="1",b.step="0.1",b.value=this.currentVolume||1,b.addEventListener("input",(e=>{this.currentVolume=parseFloat(e.target.value),console.log(`Volume updated to: ${this.currentVolume}`)})),m.appendChild(b);const y=document.createElement("div");y.className="slider-wrapper";const v=document.createElement("label");v.setAttribute("for","speed-slider"),v.textContent="Speed:",y.appendChild(v);const f=document.createElement("input");f.type="range",f.id="speed-slider",f.min="0.5",f.max="2",f.step="0.1",f.value=this.currentSpeed||1,f.addEventListener("input",(e=>{this.currentSpeed=parseFloat(e.target.value),console.log(`Speed updated to: ${this.currentSpeed}`)})),y.appendChild(f),g.appendChild(m),g.appendChild(y),y.appendChild(f),l.appendChild(c),l.appendChild(d),l.appendChild(r),l.appendChild(h),l.appendChild(u),l.appendChild(g),e.appendChild(l),document.body.appendChild(e)},e.prototype.highlightText=function(e,t,o){const n=e.dataset.originalText||e.innerText||"",i=n.slice(0,t),s=n.slice(t,t+o),a=n.slice(t+o);e.innerHTML=`${i}<span style="background-color: yellow;">${s}</span>${a}`},e.prototype.enableDefaultClickToRead=function(){document.querySelectorAll("h1, h2, h3, p, a, button").forEach((e=>{e.addEventListener("click",this.readElementContent.bind(this))}))},e.prototype.disableDefaultClickToRead=function(){document.querySelectorAll("h1, h2, h3, p, a, button").forEach((e=>{e.removeEventListener("click",this.readElementContent.bind(this))}))},e.prototype.readElementContent=function(e){const t=e.target,o=t.innerText||t.value||"",n=new SpeechSynthesisUtterance(o);n.volume=this.currentVolume||1,n.rate=this.currentSpeed||1;const i=o.split(" ");let s=0;n.onboundary=e=>{if("word"===e.name){const o=e.charIndex,n=i[s]?.length||0;this.highlightText(t,o,n),s++}},n.onend=()=>{this.clearHighlight(t)},speechSynthesis.speak(n)},e.prototype.clearHighlight=function(e){e.dataset.originalText&&(e.innerHTML=e.dataset.originalText)},e.prototype.playReadAloud=function(){document.querySelectorAll("p").length?(this.currentParagraphIndex=0,this.readCurrentLine()):console.log("No paragraphs found to read.")},e.prototype.enableCursorReadAloud=function(){document.querySelectorAll("h1, h2, h3, p, a, button").forEach((e=>{let t;e.addEventListener("mouseenter",(()=>{t=setTimeout((()=>{const t=new SpeechSynthesisUtterance(e.innerText||e.value||"");t.volume=this.currentVolume||1,t.rate=this.currentSpeed||1,this.highlightText(e,0,e.innerText.length),speechSynthesis.speak(t)}),1e3)})),e.addEventListener("mouseleave",(()=>{clearTimeout(t),speechSynthesis.cancel()}))}))},e.prototype.readPreviousLine=function(){this.currentParagraphIndex>0?(this.currentParagraphIndex--,this.readCurrentLine()):console.log("Already at the first paragraph.")},e.prototype.readNextLine=function(){const e=document.querySelectorAll("p");void 0===this.currentParagraphIndex&&(this.currentParagraphIndex=0),this.currentParagraphIndex<e.length-1?(this.currentParagraphIndex++,this.readCurrentLine()):console.log("No more paragraphs to read.")},e.prototype.speakText=function(e){const t=e.innerText||"",o=new SpeechSynthesisUtterance(t);o.volume=this.currentVolume||1,o.rate=this.currentSpeed||1,e.dataset.originalText||(e.dataset.originalText=t);const n=t.split(" ");let i=0;o.onboundary=t=>{if("word"===t.name){const o=t.charIndex,s=n[i]?.length||0;this.highlightText(e,o,s),i++}},o.onend=()=>{this.clearHighlight(e)},speechSynthesis.cancel(),speechSynthesis.speak(o)},e.prototype.readCurrentLine=function(){const e=document.querySelectorAll("p");if(void 0===this.currentParagraphIndex||this.currentParagraphIndex>=e.length)return void console.log("No more paragraphs to read.");const t=e[this.currentParagraphIndex];this.speakText(t)},e.prototype.stopReadAloud=function(){speechSynthesis.cancel(),this.currentParagraphIndex=void 0,document.querySelectorAll("[data-original-text]").forEach((e=>{this.clearHighlight(e)})),console.log("Read Aloud stopped, and all highlights cleared.")},document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".toolbox-button");e.forEach((t=>{t.addEventListener("click",(()=>{e.forEach((e=>e.style.backgroundColor="rgba(255, 255, 255, 0.3)")),t.style.backgroundColor="rgba(52, 88, 185, 1)"}))}))})),e.prototype.initFontSizeAdjustment=function(){const e=document.getElementById("increase-text-btn"),t=document.getElementById("decrease-text-btn");e&&e.addEventListener("click",(()=>{this.adjustFontSize("increase")})),t&&t.addEventListener("click",(()=>{this.adjustFontSize("decrease")}))},e.prototype.adjustFontSize=function(e){const t=document.querySelectorAll("body *:not(.toolbox):not(.toolbox *)");let o=!1,n=!1;t.forEach((t=>{const i=window.getComputedStyle(t),s=parseFloat(i.fontSize);let a=s;"increase"===e&&s<36?(a=Math.min(s+2,36),o=a<36):"decrease"===e&&s>12&&(a=Math.max(s-2,12),n=a>12),t.style.fontSize=`${a}px`})),this.setActiveButton("increase-text-btn",o),this.setActiveButton("decrease-text-btn",n),console.log(`Font size ${e}d. Active buttons: Increase (${o}), Decrease (${n}).`)},e.prototype.initHighlightButtons=function(){const e=document.getElementById("highlight-links-btn");e&&e.addEventListener("click",(()=>{this.highlightContent("links"),this.setActiveButton("highlight-links-btn")}));const t=document.getElementById("highlight-headers-btn");t&&t.addEventListener("click",(()=>{this.highlightContent("headers"),this.setActiveButton("highlight-headers-btn")}));const o=document.getElementById("highlight-images-btn");o&&o.addEventListener("click",(()=>{this.highlightContent("images"),this.setActiveButton("highlight-images-btn")}))},e.prototype.highlightContent=function(e){const t=`highlight-${e}`;let o;if("links"===e)o="a";else if("headers"===e)o="h1, h2, h3, h4, h5, h6";else{if("images"!==e)return void console.warn("Invalid type for highlightContent");o="img"}const n=document.querySelectorAll(o);0!==n.length?(n.forEach((o=>{if("images"===e)if(o.parentNode.classList.contains(t)){const e=o.parentNode;e.replaceWith(...e.childNodes)}else{const e=document.createElement("div");e.className=t,o.parentNode.insertBefore(e,o),e.appendChild(o);const n=o.alt||"No title available",i=document.createElement("span");i.textContent=n,e.appendChild(i)}else o.classList.toggle(t)})),console.log(`${n.length} ${e} elements toggled for highlighting.`)):console.warn(`No ${e} found to highlight.`)},e.prototype.stopAnimations=function(){const e=document.body.classList.toggle("disable-animations");localStorage.setItem("animationsDisabled",e),e?(console.log("Animations and transitions disabled."),this.setActiveButton("stop-animations-btn")):(console.log("Animations and transitions re-enabled."),this.setActiveButton(null))},e.prototype.restoreAnimationState=function(){"true"===localStorage.getItem("animationsDisabled")?(document.body.classList.add("disable-animations"),console.log("Restored: Animations are disabled."),this.setActiveButton("stop-animations-btn")):this.setActiveButton(null)},e.prototype.initStopAnimationsButton=function(){const e=document.getElementById("stop-animations-btn");e&&e.addEventListener("click",this.stopAnimations.bind(this))},e.prototype.initialApp=function(){this.restoreAnimationState(),console.log("Accessibility toolbox initialized.")},e.prototype.initZoomToggleFeature=function(){this.zoomStates=[1,1.25,1.5,1.75],this.zoomIndex=0;const e=document.getElementById("zoom-toggle-btn");e&&e.addEventListener("click",this.toggleZoom.bind(this)),this.restoreZoomState()},e.prototype.toggleZoom=function(){this.zoomIndex=(this.zoomIndex+1)%this.zoomStates.length;const e=this.zoomStates[this.zoomIndex];this.applyZoom(e);const t=1!==e;this.setActiveButton("zoom-toggle-btn",t),console.log(`Zoom level toggled to: ${e}`)},e.prototype.applyZoom=function(e){document.querySelectorAll("body > *:not(#toolbox):not(#openToolboxButton):not(img)").forEach((t=>{t.style.transform=`scale(${e})`,t.style.transformOrigin="0 0",t.style.width=100/e+"%"})),this.saveZoomState(e),console.log(`Zoom level applied: ${e}`)},e.prototype.restoreZoomState=function(){const e=parseFloat(localStorage.getItem("zoomLevel"))||1;this.applyZoom(e),this.zoomIndex=this.zoomStates.indexOf(e),-1===this.zoomIndex&&(this.zoomIndex=0);const t=1!==e;this.setActiveButton("zoom-toggle-btn",t)},e.prototype.saveZoomState=function(e){localStorage.setItem("zoomLevel",e),console.log(`Zoom level saved: ${e}`)},e.prototype.initNightModeFeature=function(){const e=document.getElementById("night-mode-btn");e&&e.addEventListener("click",(()=>{this.toggleNightMode()}));const t="true"===localStorage.getItem("nightMode");document.body.classList.toggle("night-mode",t),this.setActiveButton("night-mode-btn",t)},e.prototype.toggleNightMode=function(){const e=document.body.classList.toggle("night-mode");localStorage.setItem("nightMode",e),this.setActiveButton("night-mode-btn",e),console.log(`Night Mode ${e?"enabled":"disabled"}.`)},e.prototype.initTextSpacingFeature=function(){const e=document.getElementById("text-spacing-btn");e&&e.addEventListener("click",(()=>{this.toggleTextSpacing("text-spacing-btn")}))},e.prototype.toggleTextSpacing=function(e){const t=document.querySelectorAll("body *:not(.toolbox):not(.toolbox *)"),o=["normal","0.1em","0.2em","0.3em"];void 0===this.currentTextSpacingIndex&&(this.currentTextSpacingIndex=0),this.currentTextSpacingIndex=(this.currentTextSpacingIndex+1)%o.length;const n=o[this.currentTextSpacingIndex];t.forEach((e=>{e.style.letterSpacing=n}));const i="normal"!==n;this.setActiveButton(e,i),console.log(`Text spacing set to: ${n}`)},e.prototype.initLineHeightFeature=function(){const e=document.getElementById("line-height-btn");e&&e.addEventListener("click",(()=>{this.toggleLineHeight("line-height-btn")}))},e.prototype.toggleLineHeight=function(e){const t=document.querySelectorAll("body *:not(.toolbox):not(.toolbox *)"),o=["normal","1.5","2","2.5"];void 0===this.currentLineHeightIndex&&(this.currentLineHeightIndex=0),this.currentLineHeightIndex=(this.currentLineHeightIndex+1)%o.length;const n=o[this.currentLineHeightIndex];t.forEach((e=>{e.style.lineHeight=n})),"normal"===n?this.setActiveButton(e,!1):this.setActiveButton(e,!0),console.log(`Line height set to: ${n}`)},e.prototype.initCursorSizeAdjustment=function(){const e=document.getElementById("cursor-size-btn");e&&e.addEventListener("click",(()=>{this.toggleCursorSize("cursor-size-btn")}))},e.prototype.toggleCursorSize=function(e){const t=[{size:"normal",cursor:"auto",label:"Normal",icon:'<i class="fas fa-mouse-pointer"></i>'},{size:"medium",cursor:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="40" width="27.5" viewBox="0 0 320 512"><path fill="%23e0e0e0" d="M0 55.2L0 426c0 12.2 9.9 22 22 22c6.3 0 12.4-2.7 16.6-7.5L121.2 346l58.1 116.3c7.9 15.8 27.1 22.2 42.9 14.3s22.2-27.1 14.3-42.9L179.8 320l118.1 0c12.2 0 22.1-9.9 22.1-22.1c0-6.3-2.7-12.3-7.4-16.5L38.6 37.9C34.3 34.1 28.9 32 23.2 32C10.4 32 0 42.4 0 55.2z"/></svg>\') 40 40, auto',label:"Medium",icon:'<i class="fas fa-expand-alt"></i>'},{size:"large",cursor:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="60" width="37.5" viewBox="0 0 320 512"><path fill="%23e0e0e0" d="M0 55.2L0 426c0 12.2 9.9 22 22 22c6.3 0 12.4-2.7 16.6-7.5L121.2 346l58.1 116.3c7.9 15.8 27.1 22.2 42.9 14.3s22.2-27.1 14.3-42.9L179.8 320l118.1 0c12.2 0 22.1-9.9 22.1-22.1c0-6.3-2.7-12.3-7.4-16.5L38.6 37.9C34.3 34.1 28.9 32 23.2 32C10.4 32 0 42.4 0 55.2z"/></svg>\') 70 70, auto',label:"Large",icon:'<i class="fas fa-expand"></i>'},{size:"medium",cursor:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="40" width="27.5" viewBox="0 0 320 512"><path fill="%23000000" d="M0 55.2L0 426c0 12.2 9.9 22 22 22c6.3 0 12.4-2.7 16.6-7.5L121.2 346l58.1 116.3c7.9 15.8 27.1 22.2 42.9 14.3s22.2-27.1 14.3-42.9L179.8 320l118.1 0c12.2 0 22.1-9.9 22.1-22.1c0-6.3-2.7-12.3-7.4-16.5L38.6 37.9C34.3 34.1 28.9 32 23.2 32C10.4 32 0 42.4 0 55.2z"/></svg>\') 20 20, auto',label:"Medium Black",icon:'<i class="fas fa-circle"></i>'},{size:"large",cursor:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="60" width="37.5" viewBox="0 0 320 512"><path fill="%23000000" d="M0 55.2L0 426c0 12.2 9.9 22 22 22c6.3 0 12.4-2.7 16.6-7.5L121.2 346l58.1 116.3c7.9 15.8 27.1 22.2 42.9 14.3s22.2-27.1 14.3-42.9L179.8 320l118.1 0c12.2 0 22.1-9.9 22.1-22.1c0-6.3-2.7-12.3-7.4-16.5L38.6 37.9C34.3 34.1 28.9 32 23.2 32C10.4 32 0 42.4 0 55.2z"/></svg>\') 30 30, auto',label:"Large Black",icon:'<i class="fas fa-circle-notch"></i>'}];void 0===this.currentCursorSizeIndex&&(this.currentCursorSizeIndex=0),this.currentCursorSizeIndex=(this.currentCursorSizeIndex+1)%t.length;const o=t[this.currentCursorSizeIndex];document.documentElement.style.cursor=o.cursor;const n=document.getElementById(e);n&&(n.innerHTML=`${o.icon} Cursor Size: ${o.label}`);const i="normal"!==o.size;this.setActiveButton(e,i),console.log(`Cursor size set to: ${o.size}`)},e.prototype.initKeyboardNavigation=function(){const e=document.getElementById("keyboard-navigation-btn");e&&e.addEventListener("click",(()=>{this.keyboardNavigationActive=!this.keyboardNavigationActive,this.setActiveButton("keyboard-navigation-btn"),this.keyboardNavigationActive?(this.enableKeyboardNavigation(),this.showKeyboardNavigationPopup()):(this.disableKeyboardNavigation(),this.hideKeyboardNavigationPopup())}))},e.prototype.enableKeyboardNavigation=function(){console.log("Keyboard Navigation Enabled"),document.addEventListener("keydown",this.handleKeyboardNavigation.bind(this))},e.prototype.disableKeyboardNavigation=function(){console.log("Keyboard Navigation Disabled"),document.removeEventListener("keydown",this.handleKeyboardNavigation.bind(this))},e.prototype.handleKeyboardNavigation=function(e){const t=Array.from(document.querySelectorAll('a, button, input, textarea, select, [tabindex]:not([tabindex="-1"])')).filter((e=>!e.disabled&&null!==e.offsetParent));let o=t.indexOf(document.activeElement);const n={ArrowDown:()=>{e.preventDefault(),o=(o+1)%t.length,t[o].focus()},ArrowUp:()=>{e.preventDefault(),o=(o-1+t.length)%t.length,t[o].focus()},Enter:()=>{document.activeElement&&document.activeElement.click()},Escape:()=>{this.disableKeyboardNavigation(),this.hideKeyboardNavigationPopup(),this.setActiveButton(null)},KeyB:()=>document.getElementById("blue-filter-btn").click(),KeyI:()=>document.getElementById("remove-images-btn").click(),KeyA:()=>document.getElementById("remove-audio-btn").click(),KeyR:()=>document.getElementById("read-aloud-btn").click(),KeyP:()=>document.getElementById("increase-text-btn").click(),KeyM:()=>document.getElementById("decrease-text-btn").click(),KeyH:()=>document.getElementById("highlight-links-btn").click(),KeyS:()=>document.getElementById("stop-animations-btn").click(),KeyZ:()=>document.getElementById("zoom-toggle-btn").click(),KeyN:()=>document.getElementById("night-mode-btn").click(),KeyT:()=>document.getElementById("text-spacing-btn").click(),KeyL:()=>document.getElementById("line-height-btn").click(),KeyC:()=>document.getElementById("cursor-size-btn").click()};n[e.code]&&n[e.code]()},e.prototype.showKeyboardNavigationPopup=function(){if(document.getElementById("keyboard-navigation-popup"))return;const e=n("keyboard-popup","keyboard-navigation-popup"),o=n("popup-header"),i=s(3,"Keyboard Shortcuts","popup-title"),a=t("button",{class:"close-popup-btn"},"✖");a.addEventListener("click",this.hideKeyboardNavigationPopup.bind(this)),o.appendChild(i),o.appendChild(a);const l=n("popup-body"),c=t("ul",{class:"shortcut-list"});[{key:"ArrowDown",text:"Navigate to next element"},{key:"ArrowUp",text:"Navigate to previous element"},{key:"Enter",text:"Activate selected element"},{key:"B",text:"Blue Filter"},{key:"I",text:"Remove Images"},{key:"A",text:"Remove Audio"},{key:"R",text:"Read Aloud"},{key:"P",text:"Increase Text Size"},{key:"M",text:"Decrease Text Size"},{key:"H",text:"Highlight Links"},{key:"S",text:"Stop Animations"},{key:"Z",text:"Zoom"},{key:"N",text:"Night Mode"},{key:"T",text:"Adjust Text Spacing"},{key:"L",text:"Adjust Line Height"},{key:"C",text:"Change Cursor Size"}].forEach((({key:e,text:o})=>{const n=t("li",{class:"shortcut-item"});n.innerHTML=`<strong>${e}</strong>: ${o}`,c.appendChild(n)})),l.appendChild(c),e.appendChild(o),e.appendChild(l),document.body.appendChild(e)},e.prototype.hideKeyboardNavigationPopup=function(){const e=document.getElementById("keyboard-navigation-popup");e&&e.remove()},e.prototype.setActiveButton=function(e,t=null){const o=document.getElementById(e);o&&((null!==t?t:"true"!==o.dataset.active)?(o.style.backgroundColor="rgba(52, 88, 185, 1)",o.dataset.active="true"):(o.style.backgroundColor="rgba(255, 255, 255, 0.3)",o.dataset.active="false"))},e.prototype.resetButtonStates=function(){document.querySelectorAll(".toolbox-button").forEach((e=>{e.style.backgroundColor="rgba(255, 255, 255, 0.3)",e.dataset.active="false"}))},e.prototype.initAccessibleFontToggle=function(){const e=document.getElementById("accessible-font-btn");e&&e.addEventListener("click",(()=>{this.toggleAccessibleFont(),this.setActiveButton("accessible-font-btn")}))},e.prototype.toggleAccessibleFont=function(){const e=document.body.classList.toggle("accessible-font");console.log("Accessible font "+(e?"enabled":"disabled"))},e.prototype.initResetFeature=function(){const e=document.getElementById("reset-btn");e&&e.addEventListener("click",(()=>{this.resetToolbox()}))},e.prototype.resetToolbox=function(){document.querySelectorAll(".highlight-links, .highlight-headers, .highlight-images").forEach((e=>{e.classList.remove("highlight-links","highlight-headers","highlight-images")})),document.querySelectorAll("body *:not(.toolbox):not(.toolbox *)").forEach((e=>{e.style.fontSize&&(e.style.fontSize=""),e.style.letterSpacing&&(e.style.letterSpacing=""),e.style.lineHeight&&(e.style.lineHeight=""),e.style.transform&&(e.style.transform=""),e.style.transformOrigin&&(e.style.transformOrigin=""),e.style.width&&e.style.transform&&(e.style.width="")}));const e=document.querySelector(".blue-overlay");e&&e.classList.remove("active"),this.imagesHidden&&(this.removedImages.forEach((({img:e,parent:t,nextSibling:o})=>{o?t.insertBefore(e,o):t.appendChild(e)})),this.removedImages=[],this.imagesHidden=!1),document.querySelectorAll("audio, video").forEach((e=>{e.muted&&(e.muted=!1)})),document.body.classList.remove("night-mode"),document.documentElement.style.cursor="auto",document.body.classList.remove("accessible-font"),document.body.classList.remove("disable-animations"),localStorage.removeItem("animationsDisabled"),localStorage.removeItem("nightMode"),localStorage.removeItem("zoomLevel"),this.resetButtonStates(),console.log("Toolbox reset to the original state.")},document.addEventListener("DOMContentLoaded",(()=>{new e,function(){const e=document.createElement("link");e.rel="stylesheet",e.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css",e.type="text/css",document.head.appendChild(e)}()})),{}})()));