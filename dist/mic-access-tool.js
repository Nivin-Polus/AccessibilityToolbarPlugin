!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MicAccessTool=t():e.MicAccessTool=t()}(self,(()=>(()=>{"use strict";function e(e){this.init=e||{},this.removedImages=[],this.imagesHidden=!1,this.isMuted=!1,this.initializeAccessibilityToolbox(),this.initBlueFilter(),this.initRemoveImages(),this.initAudioRemoval(),this.initReadAloud(),this.initFontSizeAdjustment(),this.initHighlightButtons(),this.initStopAnimationsButton(),this.initZoomToggleFeature(),this.initNightModeFeature(),this.initTextSpacingFeature(),this.initLineHeightFeature(),this.initCursorSizeAdjustment()}function t(e,t={},n=""){const o=document.createElement(e);for(const[e,n]of Object.entries(t))o.setAttribute(e,n);return n&&(o.innerText=n),o}function n(e,n,o=""){const i=t("button",{class:"toolbox-button",id:e});if(o){const e=document.createElement("span");e.innerHTML=o,i.appendChild(e)}const s=document.createTextNode(n);return i.appendChild(s),i}function o(e,n=""){const o={class:e};return n&&(o.id=n),t("div",o)}function i(e,n,o){return t("img",{src:e,alt:n,class:o})}function s(e,n,o=""){return t(`h${e}`,{class:o},n)}return e.prototype.createToolbox=function(){const e=o("toolbox hidden","toolbox"),t=o("toolbox-image-container"),a=i("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRmaznO2w-h9n4bz-pEGtsiqy0J1JGh-wlMCw&s","Accessibility Logo","toolbox-image");t.appendChild(a),e.appendChild(t);const l=o("toolbox-header"),d=s(2,"Accessibility Toolbox","toolbox-title");l.appendChild(d);const c=o("toolbox-body");[{id:"blue-filter-btn",text:"Blue Filter",iconClass:'<i class="fas fa-adjust"></i>'},{id:"read-aloud-btn",text:"Read Aloud",iconClass:'<i class="fas fa-volume-up"></i>'},{id:"remove-images-btn",text:"Remove Images",iconClass:'<i class="fa-regular fa-image"></i>'},{id:"remove-audio-btn",text:"Remove Audio",iconClass:'<i class="fas fa-microphone-slash"></i>'},{id:"increase-text-btn",text:"Increase Text",iconClass:'<i class="fas fa-text-height"></i>'},{id:"decrease-text-btn",text:"Decrease Text",iconClass:'<i class="fas fa-text-width"></i>'},{id:"highlight-links-btn",text:"Highlight Links",iconClass:'<i class="fas fa-link"></i>'},{id:"highlight-headers-btn",text:"Highlight Headers",iconClass:'<i class="fas fa-heading"></i>'},{id:"stop-animations-btn",text:"Stop Animations",iconClass:'<i class="fas fa-ban"></i>'},{id:"zoom-toggle-btn",text:"Zoom",iconClass:'<i class="fas fa-search"></i>'},{id:"night-mode-btn",text:"Night Mode",iconClass:'<i class="fas fa-moon"></i>'},{id:"cursor-size-btn",text:"Change Cursor Size",iconClass:'<i class="fas fa-mouse-pointer"></i>'}].forEach((({id:e,text:t,iconClass:o})=>{const i=n(e,t,o);c.appendChild(i)})),e.appendChild(l),e.appendChild(c),document.body.appendChild(e)},e.prototype.createSideButton=function(){const e=o("side-button","openToolboxButton"),t=i("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRmaznO2w-h9n4bz-pEGtsiqy0J1JGh-wlMCw&s","Open Toolbox","side-button-image");e.appendChild(t),document.body.appendChild(e)},e.prototype.initializeAccessibilityToolbox=function(){this.createToolbox(),this.createSideButton();const e=document.getElementById("toolbox"),t=document.getElementById("openToolboxButton");t.addEventListener("click",(t=>{t.stopPropagation(),e.classList.toggle("visible")})),document.addEventListener("click",(n=>{e.contains(n.target)||t.contains(n.target)||e.classList.remove("visible")}))},e.prototype.initBlueFilter=function(){const e=o("blue-overlay");document.body.appendChild(e);const t=document.getElementById("blue-filter-btn");t&&t.addEventListener("click",(()=>{e.classList.toggle("active")}))},e.prototype.initRemoveImages=function(){const e=document.getElementById("remove-images-btn");e&&e.addEventListener("click",this.toggleImages.bind(this))},e.prototype.toggleImages=function(){this.imagesHidden?(this.removedImages.forEach((({img:e,parent:t,nextSibling:n})=>{n?t.insertBefore(e,n):t.appendChild(e)})),this.removedImages=[]):document.querySelectorAll("img:not(.toolbox-image):not(.side-button-image)").forEach((e=>{this.removedImages.push({img:e,parent:e.parentNode,nextSibling:e.nextSibling}),e.parentNode.removeChild(e)})),this.imagesHidden=!this.imagesHidden},e.prototype.initAudioRemoval=function(){const e=document.getElementById("remove-audio-btn");e&&e.addEventListener("click",this.audioRemoval.bind(this))},e.prototype.audioRemoval=function(){const e=document.querySelectorAll("audio, video");this.isMuted=!this.isMuted,e.forEach((e=>{e.muted=this.isMuted}))},e.prototype.initReadAloud=function(){const e=document.getElementById("read-aloud-btn");if(e){let t=!1;e.addEventListener("click",(()=>{t?(this.disableDefaultClickToRead(),t=!1,this.stopReadAloud()):(document.getElementById("read-aloud-toolbar")||this.createReadAloudToolbar(),this.enableDefaultClickToRead(),t=!0)}))}},e.prototype.createReadAloudToolbar=function(){const e=o("read-aloud-toolbar","read-aloud-toolbar"),t=o("toolbar-header"),i=s(2,"Read Aloud Settings","toolbar-title"),a=n("close-toolbar","✖");a.addEventListener("click",(()=>{e.remove(),this.disableDefaultClickToRead()})),t.appendChild(i),t.appendChild(a),e.appendChild(t);const l=o("toolbar-controls"),d=n("cursor-read-btn","Cursor Read Aloud");d.innerHTML='<i class="fas fa-mouse-pointer"></i> Cursor Read Aloud',d.addEventListener("click",this.enableCursorReadAloud.bind(this));const c=n("previous-line-btn","Previous Line");c.innerHTML='<i class="fas fa-arrow-left"></i> ',c.addEventListener("click",this.readPreviousLine.bind(this));const r=n("play-read-btn","▶");r.innerHTML='<i class="fas fa-play"></i>',r.addEventListener("click",this.playReadAloud.bind(this));const h=n("stop-read-btn","⏹");h.innerHTML='<i class="fas fa-stop"></i>',h.addEventListener("click",this.stopReadAloud.bind(this));const u=n("next-line-btn","Next Line");u.innerHTML='<i class="fas fa-arrow-right"></i> ',u.addEventListener("click",this.readNextLine.bind(this));const p=document.createElement("div");p.className="sliders-container";const m=document.createElement("div");m.className="slider-wrapper";const g=document.createElement("label");g.setAttribute("for","volume-slider"),g.textContent="Volume:",m.appendChild(g);const b=document.createElement("input");b.type="range",b.id="volume-slider",b.min="0",b.max="1",b.step="0.1",b.value=this.currentVolume||1,b.addEventListener("input",(e=>{this.currentVolume=parseFloat(e.target.value),console.log(`Volume updated to: ${this.currentVolume}`)})),m.appendChild(b);const f=document.createElement("div");f.className="slider-wrapper";const y=document.createElement("label");y.setAttribute("for","speed-slider"),y.textContent="Speed:",f.appendChild(y);const x=document.createElement("input");x.type="range",x.id="speed-slider",x.min="0.5",x.max="2",x.step="0.1",x.value=this.currentSpeed||1,x.addEventListener("input",(e=>{this.currentSpeed=parseFloat(e.target.value),console.log(`Speed updated to: ${this.currentSpeed}`)})),f.appendChild(x),p.appendChild(m),p.appendChild(f),f.appendChild(x),l.appendChild(d),l.appendChild(c),l.appendChild(r),l.appendChild(h),l.appendChild(u),l.appendChild(p),e.appendChild(l),document.body.appendChild(e)},e.prototype.highlightText=function(e,t,n){const o=e.textContent,i=o.slice(t,t+n);e.textContent="";const s=document.createElement("span");s.textContent=i,s.style.backgroundColor="yellow",e.appendChild(s),setTimeout((()=>{e.textContent=o}),500)},e.prototype.enableDefaultClickToRead=function(){document.querySelectorAll("h1, h2, h3, p, a, button").forEach((e=>{e.addEventListener("click",this.readElementContent.bind(this))}))},e.prototype.disableDefaultClickToRead=function(){document.querySelectorAll("h1, h2, h3, p, a, button").forEach((e=>{e.removeEventListener("click",this.readElementContent.bind(this))}))},e.prototype.readElementContent=function(e){const t=e.target,n=t.innerText||t.value||"",o=new SpeechSynthesisUtterance(n);o.volume=this.currentVolume||1,o.rate=this.currentSpeed||1;const i=n.split(" ");let s=0;o.onboundary=e=>{if("word"===e.name){const n=e.charIndex,o=i[s].length;this.highlightText(t,n,o),s++}},o.onend=()=>{t.innerHTML=n},speechSynthesis.speak(o)},e.prototype.playReadAloud=function(){const e=document.body.innerText,t=new SpeechSynthesisUtterance(e);t.volume=this.currentVolume||1,t.rate=this.currentSpeed||1;const n=e.split(" ");let o=0;t.onboundary=e=>{if("word"===e.name){const t=e.charIndex,i=n[o].length;this.highlightText(document.body,t,i),o++}},t.onend=()=>{document.body.textContent=e},speechSynthesis.speak(t)},e.prototype.enableCursorReadAloud=function(){document.querySelectorAll("h1, h2, h3, p, a, button").forEach((e=>{let t;e.addEventListener("mouseenter",(()=>{t=setTimeout((()=>{const t=new SpeechSynthesisUtterance(e.innerText||e.value||"");t.volume=this.currentVolume||1,t.rate=this.currentSpeed||1,this.highlightText(e,0,e.innerText.length),speechSynthesis.speak(t)}),1e3)})),e.addEventListener("mouseleave",(()=>{clearTimeout(t),speechSynthesis.cancel()}))}))},e.prototype.readPreviousLine=function(){if(!this.currentParagraphIndex||this.currentParagraphIndex<=0)return void(this.currentParagraphIndex=0);this.currentParagraphIndex--;const e=document.querySelectorAll("p");e[this.currentParagraphIndex]&&this.speakText(e[this.currentParagraphIndex].innerText)},e.prototype.readNextLine=function(){const e=document.querySelectorAll("p");this.currentParagraphIndex||(this.currentParagraphIndex=0),this.currentParagraphIndex<e.length-1&&(this.currentParagraphIndex++,e[this.currentParagraphIndex]&&this.speakText(e[this.currentParagraphIndex].innerText))},e.prototype.speakText=function(e){const t=new SpeechSynthesisUtterance(e);t.volume=this.currentVolume||1,t.rate=this.currentSpeed||1,speechSynthesis.cancel(),speechSynthesis.speak(t)},e.prototype.stopReadAloud=function(){speechSynthesis.cancel()},document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".toolbox-button");e.forEach((t=>{t.addEventListener("click",(()=>{e.forEach((e=>e.style.backgroundColor="rgba(255, 255, 255, 0.3)")),t.style.backgroundColor="rgba(52, 88, 185, 1)"}))}))})),e.prototype.initFontSizeAdjustment=function(){const e=document.getElementById("increase-text-btn"),t=document.getElementById("decrease-text-btn");e&&e.addEventListener("click",this.adjustFontSize.bind(this,"increase")),t&&t.addEventListener("click",this.adjustFontSize.bind(this,"decrease"))},e.prototype.adjustFontSize=function(e){document.querySelectorAll("body *:not(.toolbox):not(.toolbox *)").forEach((t=>{const n=window.getComputedStyle(t),o=parseFloat(n.fontSize);let i;"increase"===e?i=Math.min(o+2,36):"decrease"===e&&(i=Math.max(o-2,12)),t.style.fontSize=`${i}px`}))},e.prototype.initHighlightButtons=function(){const e=document.getElementById("highlight-links-btn");e&&e.addEventListener("click",(()=>this.highlightContent("links")));const t=document.getElementById("highlight-headers-btn");t&&t.addEventListener("click",(()=>this.highlightContent("headers")));const n=document.getElementById("highlight-images-btn");n&&n.addEventListener("click",(()=>this.highlightContent("images")))},e.prototype.highlightContent=function(e){const t=`highlight-${e}`;let n;if("links"===e)n="a";else if("headers"===e)n="h1, h2, h3, h4, h5, h6";else{if("images"!==e)return void console.warn("Invalid type for highlightContent");n="img"}const o=document.querySelectorAll(n);0!==o.length?(o.forEach((n=>{if("images"===e)if(n.parentNode.classList.contains(t)){const e=n.parentNode;e.replaceWith(...e.childNodes)}else{const e=document.createElement("div");e.className=t,n.parentNode.insertBefore(e,n),e.appendChild(n);const o=n.alt||"No title available",i=document.createElement("span");i.textContent=o,e.appendChild(i)}else n.classList.toggle(t)})),console.log(`${o.length} ${e} elements toggled for highlighting.`)):console.warn(`No ${e} found to highlight.`)},e.prototype.stopAnimations=function(){const e=document.body.classList.toggle("disable-animations");localStorage.setItem("animationsDisabled",e),e?console.log("Animations and transitions disabled."):console.log("Animations and transitions re-enabled.")},e.prototype.restoreAnimationState=function(){"true"===localStorage.getItem("animationsDisabled")&&(document.body.classList.add("disable-animations"),console.log("Restored: Animations are disabled."))},e.prototype.initStopAnimationsButton=function(){const e=document.getElementById("stop-animations-btn");e&&e.addEventListener("click",this.stopAnimations.bind(this))},e.prototype.initialApp=function(){this.restoreAnimationState(),console.log("Accessibility toolbox initialized.")},e.prototype.initZoomToggleFeature=function(){this.zoomStates=[1,1.25,1.5],this.zoomIndex=0;const e=document.getElementById("zoom-toggle-btn");e&&e.addEventListener("click",this.toggleZoom.bind(this))},e.prototype.toggleZoom=function(){this.zoomIndex=(this.zoomIndex+1)%this.zoomStates.length;const e=this.zoomStates[this.zoomIndex];this.applyZoom(e)},e.prototype.applyZoom=function(e){document.querySelectorAll("body > *:not(#toolbox):not(#openToolboxButton)").forEach((t=>{t.style.transform=`scale(${e})`,t.style.transformOrigin="0 0",t.style.width=100/e+"%"})),console.log(`Zoom level applied: ${e}`)},e.prototype.restoreZoomState=function(){const e=parseFloat(localStorage.getItem("zoomLevel"))||1;this.applyZoom(e),this.zoomIndex=this.zoomStates.indexOf(e),-1===this.zoomIndex&&(this.zoomIndex=0)},e.prototype.saveZoomState=function(e){localStorage.setItem("zoomLevel",e),console.log(`Zoom level saved: ${e}`)},e.prototype.applyZoom=function(e){document.querySelectorAll("body > *:not(#toolbox):not(#openToolboxButton):not(img)").forEach((t=>{t.style.transform=`scale(${e})`,t.style.transformOrigin="0 0",t.style.width=100/e+"%"})),this.saveZoomState(e),console.log(`Zoom level applied: ${e}`)},e.prototype.initNightModeFeature=function(){const e=document.getElementById("night-mode-btn");e&&e.addEventListener("click",this.toggleNightMode.bind(this)),"true"===localStorage.getItem("nightMode")&&(document.body.classList.add("night-mode"),console.log("Night Mode enabled on page load."))},e.prototype.toggleNightMode=function(){const e=document.body.classList.toggle("night-mode");localStorage.setItem("nightMode",e),console.log(`Night Mode ${e?"enabled":"disabled"}.`)},e.prototype.initTextSpacingFeature=function(){const e=document.getElementById("text-spacing-btn");e&&e.addEventListener("click",this.toggleTextSpacing.bind(this))},e.prototype.toggleTextSpacing=function(){const e=document.querySelectorAll("body *:not(.toolbox):not(.toolbox *)"),t=["normal","0.1em","0.2em","0.3em"];this.currentTextSpacingIndex||(this.currentTextSpacingIndex=0),this.currentTextSpacingIndex=(this.currentTextSpacingIndex+1)%t.length;const n=t[this.currentTextSpacingIndex];e.forEach((e=>{e.style.letterSpacing=n}))},e.prototype.initLineHeightFeature=function(){const e=document.getElementById("line-height-btn");e&&e.addEventListener("click",this.toggleLineHeight.bind(this))},e.prototype.toggleLineHeight=function(){const e=document.querySelectorAll("body *:not(.toolbox):not(.toolbox *)"),t=["normal","1.5","2","2.5"];this.currentLineHeightIndex||(this.currentLineHeightIndex=0),this.currentLineHeightIndex=(this.currentLineHeightIndex+1)%t.length;const n=t[this.currentLineHeightIndex];e.forEach((e=>{e.style.lineHeight=n})),console.log(`Line height set to: ${n}`)},e.prototype.initCursorSizeAdjustment=function(){const e=document.getElementById("cursor-size-btn");e&&e.addEventListener("click",this.toggleCursorSize.bind(this))},e.prototype.toggleCursorSize=function(){const e=[{size:"normal",cursor:"auto"},{size:"medium",cursor:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="40" width="25" viewBox="0 0 320 512"><path fill="%23ffffff" d="M302.2 329.1H196.1l55.8 136c3.9 9.4-.6 20-9.4 24l-49.2 21.4c-9.2 4-19.4-.6-23.3-9.7l-53.1-129.1-86.7 89.1C18.7 472.7 0 463.6 0 448V18.3C0 1.9 19.9-6.1 30.3 5.4l284.4 292.5c11.5 11.2 3 31.1-12.5 31.1z"/></svg>\') 20 20, auto'},{size:"large",cursor:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="60" width="37.5" viewBox="0 0 320 512"><path fill="%23ffffff" d="M302.2 329.1H196.1l55.8 136c3.9 9.4-.6 20-9.4 24l-49.2 21.4c-9.2 4-19.4-.6-23.3-9.7l-53.1-129.1-86.7 89.1C18.7 472.7 0 463.6 0 448V18.3C0 1.9 19.9-6.1 30.3 5.4l284.4 292.5c11.5 11.2 3 31.1-12.5 31.1z"/></svg>\') 30 30, auto'}];document.documentElement.dataset.cursorSizeIndex||(document.documentElement.dataset.cursorSizeIndex=0);let t=parseInt(document.documentElement.dataset.cursorSizeIndex,10);t=(t+1)%e.length,document.documentElement.dataset.cursorSizeIndex=t;const n=e[t];document.documentElement.style.cursor=n.cursor,console.log(`Cursor size set to: ${n.size}`)},document.addEventListener("DOMContentLoaded",(()=>{new e,function(){const e=document.createElement("link");e.rel="stylesheet",e.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css",e.type="text/css",document.head.appendChild(e)}()})),{}})()));